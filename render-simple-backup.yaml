services:
  - type: cron
    name: movaga-simple-backup
    env: node
    repo: https://github.com/szilamer/movaga
    branch: main
    schedule: "0 6 * * 0"  # Minden vas√°rnap hajnal 6-kor
    buildCommand: |
      # Install PostgreSQL client tools
      apt-get update
      apt-get install -y postgresql-client-15
    startCommand: bash scripts/simple-backup.sh
    envVars:
      # Database connection (automatic from your PostgreSQL instance)
      - key: DATABASE_URL
        fromDatabase:
          name: movaga-postgres  # Replace with your actual database name
          property: connectionString
      
      # Optional: Email notifications
      - key: NOTIFICATION_EMAIL
        value: "admin@movaga.hu"
    
    # Use smallest instance for backup job
    plan: starter 